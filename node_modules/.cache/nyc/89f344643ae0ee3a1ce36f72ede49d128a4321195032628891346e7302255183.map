{"version":3,"sources":["app.js"],"names":["PORT","process","env","app","upload","cloudUpload","allowCrossDomain","req","res","next","header","use","bodyParser","json","urlencoded","extended","text","type","express","get","sendFile","path","resolve","post","signUp","signIn","verifyToken","single","seller","postAd","patch","updatePrice","markAsSold","viewer","dynamicView","specificCar","buyer","flag","order","updateOrder","admin","listen","console","log"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAGA,IAAMA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AACA,IAAMG,GAAG,GAAG,0BAAZ;IACQC,M,GAAWC,+B,CAAXD,M;;AAGR,IAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC3CD,EAAAA,GAAG,CAACE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAF,EAAAA,GAAG,CAACE,MAAJ,CAAW,8BAAX,EAA2C,qBAA3C;AACAF,EAAAA,GAAG,CAACE,MAAJ,CAAW,8BAAX,EAA2C,cAA3C;AACAD,EAAAA,IAAI;AACL,CALD;;AAOAN,GAAG,CAACQ,GAAJ,CAAQL,gBAAR;AACAH,GAAG,CAACQ,GAAJ,CAAQC,uBAAWC,IAAX,EAAR;AACAV,GAAG,CAACQ,GAAJ,CAAQC,uBAAWE,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AACAZ,GAAG,CAACQ,GAAJ,CAAQC,uBAAWI,IAAX,EAAR;AACAb,GAAG,CAACQ,GAAJ,CAAQC,uBAAWC,IAAX,CAAgB;AAAEI,EAAAA,IAAI,EAAE;AAAR,CAAhB,CAAR;AACAd,GAAG,CAACQ,GAAJ,CAAQO,8BAAe,MAAf,CAAR;AACAf,GAAG,CAACQ,GAAJ,CAAQ,+BAAR;AAGAR,GAAG,CAACgB,GAAJ,CAAQ,GAAR,EAAa,UAACZ,GAAD,EAAMC,GAAN,EAAc;AACzBA,EAAAA,GAAG,CAACY,QAAJ,CAAaC,iBAAKC,OAAL,CAAa,iBAAb,CAAb;AACD,CAFD;AAGAnB,GAAG,CAACoB,IAAJ,CAAS,gBAAT,EAA2BC,kBAA3B;AACArB,GAAG,CAACoB,IAAJ,CAAS,gBAAT,EAA2BE,kBAA3B;AACAtB,GAAG,CAACoB,IAAJ,CAAS,aAAT,EAAwBG,uBAAxB,EAAqCtB,MAAM,CAACuB,MAAP,CAAc,UAAd,CAArC,EAAgEC,mBAAOC,MAAvE;AACA1B,GAAG,CAAC2B,KAAJ,CAAU,0BAAV,EAAsCJ,uBAAtC,EAAmDE,mBAAOG,WAA1D;AACA5B,GAAG,CAAC2B,KAAJ,CAAU,2BAAV,EAAuCJ,uBAAvC,EAAoDE,mBAAOI,UAA3D;AACA7B,GAAG,CAACgB,GAAJ,CAAQ,aAAR,EAAuBc,mBAAOC,WAA9B;AACA/B,GAAG,CAACgB,GAAJ,CAAQ,qBAAR,EAA+Bc,mBAAOE,WAAtC;AACAhC,GAAG,CAACoB,IAAJ,CAAS,cAAT,EAAyBG,uBAAzB,EAAsCU,kBAAMC,IAA5C;AACAlC,GAAG,CAACoB,IAAJ,CAAS,eAAT,EAA0BG,uBAA1B,EAAuCU,kBAAME,KAA7C;AACAnC,GAAG,CAAC2B,KAAJ,CAAU,8BAAV,EAA0CJ,uBAA1C,EAAuDU,kBAAMG,WAA7D;AACApC,GAAG,UAAH,CAAW,qBAAX,EAAkCuB,uBAAlC,EAA+Cc,2BAA/C;AAEArC,GAAG,CAACsC,MAAJ,CAAWzC,IAAX,EAAiB,YAAM;AACrB0C,EAAAA,OAAO,CAACC,GAAR,kCAAsC3C,IAAtC;AACD,CAFD;eAIe;AAAEG,EAAAA,GAAG,EAAHA;AAAF,C","sourceRoot":"/home/sami/Documents/AutoMart/src","sourcesContent":["import express from 'express';\r\nimport bodyParser from 'body-parser';\r\nimport cookieParser from 'cookie-parser';\r\nimport path from 'path';\r\nimport signUp from './ctl/signUp';\r\nimport signIn from './ctl/signIn';\r\nimport seller from './ctl/seller';\r\nimport viewer from './ctl/viewer';\r\nimport buyer from './ctl/buyer';\r\nimport admin from './ctl/admin';\r\nimport verifyToken from './mid/verifyToken';\r\nimport cloudUpload from './mid/cloudinaryAndMulter';\r\n\r\n\r\nconst PORT = process.env.PORT || 5000;\r\nconst app = express();\r\nconst { upload } = cloudUpload;\r\n\r\n\r\nconst allowCrossDomain = (req, res, next) => {\r\n  res.header('Access-Control-Allow-Origin', '*');\r\n  res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE');\r\n  res.header('Access-Control-Allow-Headers', 'Content-Type');\r\n  next();\r\n};\r\n\r\napp.use(allowCrossDomain);\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(bodyParser.text());\r\napp.use(bodyParser.json({ type: 'application/json' }));\r\napp.use(express.static('./ui'));\r\napp.use(cookieParser());\r\n\r\n\r\napp.get('/', (req, res) => {\r\n  res.sendFile(path.resolve('./ui/index.html'));\r\n});\r\napp.post('/api/v1/signup', signUp);\r\napp.post('/api/v1/signin', signIn);\r\napp.post('/api/v1/car', verifyToken, upload.single('carImage'), seller.postAd);\r\napp.patch('/api/v1/car/:carId/price', verifyToken, seller.updatePrice);\r\napp.patch('/api/v1/car/:carId/status', verifyToken, seller.markAsSold);\r\napp.get('/api/v1/car', viewer.dynamicView);\r\napp.get('/api/v1/car/:carId/', viewer.specificCar);\r\napp.post('/api/v1/flag', verifyToken, buyer.flag);\r\napp.post('/api/v1/order', verifyToken, buyer.order);\r\napp.patch('/api/v1/order/:orderId/price', verifyToken, buyer.updateOrder);\r\napp.delete('/api/v1/car/:carId/', verifyToken, admin.delete);\r\n\r\napp.listen(PORT, () => {\r\n  console.log(`server running on port ${PORT}`);\r\n});\r\n\r\nexport default { app };\r\n"]}