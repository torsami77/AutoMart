"use strict";var cov_q8tzz1mqs=function(){var path="/home/sami/Documents/AutoMart/test/user_viewer_test.js";var hash="d497328f969a5b8cbdf0d894d2b92ce386b72b27";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/sami/Documents/AutoMart/test/user_viewer_test.js",statementMap:{"0":{start:{line:3,column:12},end:{line:3,column:51}},"1":{start:{line:5,column:16},end:{line:5,column:60}},"2":{start:{line:7,column:10},end:{line:7,column:47}},"3":{start:{line:9,column:12},end:{line:9,column:51}},"4":{start:{line:11,column:11},end:{line:11,column:56}},"5":{start:{line:13,column:14},end:{line:13,column:65}},"6":{start:{line:15,column:39},end:{line:15,column:95}},"7":{start:{line:18,column:0},end:{line:18,column:43}},"8":{start:{line:20,column:0},end:{line:20,column:26}},"9":{start:{line:22,column:13},end:{line:22,column:36}},"10":{start:{line:24,column:10},end:{line:24,column:59}},"11":{start:{line:26,column:0},end:{line:278,column:3}},"12":{start:{line:27,column:2},end:{line:35,column:5}},"13":{start:{line:28,column:4},end:{line:34,column:7}},"14":{start:{line:29,column:6},end:{line:29,column:37}},"15":{start:{line:30,column:6},end:{line:30,column:57}},"16":{start:{line:31,column:6},end:{line:31,column:62}},"17":{start:{line:32,column:6},end:{line:32,column:91}},"18":{start:{line:33,column:6},end:{line:33,column:13}},"19":{start:{line:36,column:2},end:{line:44,column:5}},"20":{start:{line:37,column:4},end:{line:43,column:7}},"21":{start:{line:38,column:6},end:{line:38,column:37}},"22":{start:{line:39,column:6},end:{line:39,column:57}},"23":{start:{line:40,column:6},end:{line:40,column:62}},"24":{start:{line:41,column:6},end:{line:41,column:68}},"25":{start:{line:42,column:6},end:{line:42,column:13}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:15,column:9},end:{line:15,column:31}},loc:{start:{line:15,column:37},end:{line:15,column:97}},line:15},"1":{name:"(anonymous_1)",decl:{start:{line:26,column:35},end:{line:26,column:36}},loc:{start:{line:26,column:47},end:{line:278,column:1}},line:26},"2":{name:"(anonymous_2)",decl:{start:{line:27,column:89},end:{line:27,column:90}},loc:{start:{line:27,column:105},end:{line:35,column:3}},line:27},"3":{name:"(anonymous_3)",decl:{start:{line:28,column:39},end:{line:28,column:40}},loc:{start:{line:28,column:59},end:{line:34,column:5}},line:28},"4":{name:"(anonymous_4)",decl:{start:{line:36,column:61},end:{line:36,column:62}},loc:{start:{line:36,column:77},end:{line:44,column:3}},line:36},"5":{name:"(anonymous_5)",decl:{start:{line:37,column:35},end:{line:37,column:36}},loc:{start:{line:37,column:55},end:{line:43,column:5}},line:37}},branchMap:{"0":{loc:{start:{line:15,column:46},end:{line:15,column:94}},type:"cond-expr",locations:[{start:{line:15,column:70},end:{line:15,column:73}},{start:{line:15,column:76},end:{line:15,column:94}}],line:15},"1":{loc:{start:{line:15,column:46},end:{line:15,column:67}},type:"binary-expr",locations:[{start:{line:15,column:46},end:{line:15,column:49}},{start:{line:15,column:53},end:{line:15,column:67}}],line:15}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"d497328f969a5b8cbdf0d894d2b92ce386b72b27"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var _chai=(cov_q8tzz1mqs.s[0]++,_interopRequireDefault(require("chai")));var _chaiHttp=(cov_q8tzz1mqs.s[1]++,_interopRequireDefault(require("chai-http")));var _fs=(cov_q8tzz1mqs.s[2]++,_interopRequireDefault(require("fs")));var _util=(cov_q8tzz1mqs.s[3]++,_interopRequireDefault(require("util")));var _app=(cov_q8tzz1mqs.s[4]++,_interopRequireDefault(require("../src/app")));var _assume=(cov_q8tzz1mqs.s[5]++,_interopRequireDefault(require("./assumed/assume")));function _interopRequireDefault(obj){cov_q8tzz1mqs.f[0]++;cov_q8tzz1mqs.s[6]++;return(cov_q8tzz1mqs.b[1][0]++,obj)&&(cov_q8tzz1mqs.b[1][1]++,obj.__esModule)?(cov_q8tzz1mqs.b[0][0]++,obj):(cov_q8tzz1mqs.b[0][1]++,{"default":obj});}// eslint-disable-next-line no-unused-vars
cov_q8tzz1mqs.s[7]++;_chai["default"].use(_chaiHttp["default"]);cov_q8tzz1mqs.s[8]++;_chai["default"].should();var expect=(cov_q8tzz1mqs.s[9]++,_chai["default"].expect);var api=(cov_q8tzz1mqs.s[10]++,_chai["default"].request('http://localhost:5000'));cov_q8tzz1mqs.s[11]++;describe('User Viewer Activities',function(){cov_q8tzz1mqs.f[1]++;cov_q8tzz1mqs.s[12]++;it('should respond to viewer trying to view a specific AD without valid AD reference',function(done){cov_q8tzz1mqs.f[2]++;cov_q8tzz1mqs.s[13]++;api.get('/api/v1/car/:carId/').end(function(err,res){cov_q8tzz1mqs.f[3]++;cov_q8tzz1mqs.s[14]++;res.body.should.be.a('object');cov_q8tzz1mqs.s[15]++;res.body.should.have.property('status').equal(401);cov_q8tzz1mqs.s[16]++;res.body.should.have.property('success').equal('false');cov_q8tzz1mqs.s[17]++;res.body.should.have.property('error').equal('Please provide a valid Ad reference!');cov_q8tzz1mqs.s[18]++;done();});});cov_q8tzz1mqs.s[19]++;it('Should respond to viewer on an AD that doesnt exist ',function(done){cov_q8tzz1mqs.f[4]++;cov_q8tzz1mqs.s[20]++;api.get('/api/v1/car/12/').end(function(err,res){cov_q8tzz1mqs.f[5]++;cov_q8tzz1mqs.s[21]++;res.body.should.be.a('object');cov_q8tzz1mqs.s[22]++;res.body.should.have.property('status').equal(404);cov_q8tzz1mqs.s[23]++;res.body.should.have.property('success').equal('false');cov_q8tzz1mqs.s[24]++;res.body.should.have.property('error').equal('Ad not found!');cov_q8tzz1mqs.s[25]++;done();});});/*
      it('Should let viewer view a specific AD successfully', (done) => {
        api
          .get(`/api/v1/car/${carId}/`)
          .end((err, res) => {
            res.body.should.be.a('object');
            res.body.should.have.property('status').equal(200);
            res.body.should.have.property('success').equal('true');
            expect(res)
            .to.have.nested.property('body.data')
            .that.includes.all.keys(['id', 'email', 'created_on', 'manufacturer', 'model',
                'price', 'state', 'status', 'imageGallery']);
            res.body.data.id.should.be.a('number');
            res.body.data.email.should.be.a('string');
            res.body.data.created_on.should.be.a('string');
            res.body.data.manufacturer.should.be.a('string');
            res.body.data.model.should.be.a('string');
            res.body.data.price.should.be.a('number');
            res.body.data.state.should.be.a('string');
            res.body.data.status.should.be.a('string');
            res.body.data.imageGallery.should.be.a('array');
            done();
          });
      });
  
      it('Should let viewer view all available AD successfully', (done) => {
        api
          .get(`/api/v1/car?status=available`)
          .end((err, res) => {
            res.body.should.be.a('object');
            res.body.should.have.property('status').equal(200);
            res.body.should.have.property('success').equal('true');
            res.body.should.have.property('data');
            res.body.data.should.be.a('array');
            const firstItem = res.body.data[0];
            firstItem.should.have.property('status').equal('available');
            expect(firstItem)
              .to.have.nested.property('body.data[0]')
              .that.includes.all.keys(['id', 'owner', 'created_on',
              'state', 'status', 'price', 'manufacturer', 'model', 'body_type']);
              firstItem.id.should.be.a('integer');
              firstItem.owner.should.be.a('integer');
              firstItem.created_on.should.be.a('string');
              firstItem.state.should.be.a('string');
              firstItem.should.have.property('status').equal('available');
              firstItem.price.should.be.a('float');
              firstItem.manufacturer.should.be.a('float');
              firstItem.model.should.be.a('string');
              firstItem.body_type.should.be.a('float');
              done();
            });
      });
  
  
    it('Should let Viewer View all unsold cars within a price range', (done) => {
        const minPrice = 200.00;
        const maxPrice = 1000.00;
  
        const leastValue = (base) => {
          if (minPrice <= base) {
            return true;
          }
          return false;
        };
  
        const mostValue = (base) => {
          if (maxPrice >= base) {
            return true;
          }
          return false;
        };
        api
        .get(`/api/v1/car?status=available&minPrice=​${minPrice}​&maxPrice=​${maxPrice}`)
        .end((err, res) => {
          res.body.should.be.a('object');
          res.body.should.have.property('status').equal(200);
          res.body.should.have.property('success').equal('true');
          res.body.should.have.property('data');
          res.body.data.should.be.a('array');
          res.body.data[0].should.be.a('object');
          expect(leastValue(res.body.data[0].price)).to.equal(true);
          expect(mostValue(res.body.data[0].price)).to.equal(true);
          done();
        });
    });
  
    it('Should let viewer to view all unsold and New ADs', (done) => {
      api
        .get('/api/v1/car?status=available&state=new')
        .end((err, res) => {
          res.body.should.be.a('object');
          res.body.should.have.property('status').equal(200);
          res.body.should.have.property('success').equal('true');
          res.body.should.have.property('data');
          res.body.data.should.be.a('array');
          const firstItem = res.body.data[0];
          firstItem.should.have.property('status').equal('available');
          firstItem.should.have.property('state').equal('new');
          expect(firstItem)
            .to.have.nested.property('body.data[0]')
            .that.includes.all.keys(['id', 'owner', 'created_on',
            'state', 'status', 'price', 'manufacturer', 'model', 'body_type']);
            firstItem.id.should.be.a('integer');
            firstItem.owner.should.be.a('integer');
            firstItem.created_on.should.be.a('string');
            firstItem.state.should.be.a('string');
            firstItem.should.have.property('status').equal('available');
            firstItem.price.should.be.a('float');
            firstItem.manufacturer.should.be.a('float');
            firstItem.model.should.be.a('string');
            firstItem.body_type.should.be.a('float');
            done();
          });
    });
  
    it('Should let viewer to view all unsold and Used ADs', (done) => {
      api
        .get('/api/v1/car?status=available&state=used')
        .end((err, res) => {
          res.body.should.be.a('object');
          res.body.should.have.property('status').equal(200);
          res.body.should.have.property('success').equal('true');
          res.body.should.have.property('data');
          res.body.data.should.be.a('array');
          const firstItem = res.body.data[0];
          firstItem.should.have.property('status').equal('available');
          firstItem.should.have.property('state').equal('used');
          expect(firstItem)
            .to.have.nested.property('body.data[0]')
            .that.includes.all.keys(['id', 'owner', 'created_on',
            'state', 'status', 'price', 'manufacturer', 'model', 'body_type']);
            firstItem.id.should.be.a('integer');
            firstItem.owner.should.be.a('integer');
            firstItem.created_on.should.be.a('string');
            firstItem.state.should.be.a('string');
            firstItem.should.have.property('status').equal('available');
            firstItem.price.should.be.a('float');
            firstItem.manufacturer.should.be.a('float');
            firstItem.model.should.be.a('string');
            firstItem.body_type.should.be.a('float');
            done();
          });
    });
  
    it('Should let viewer to view all unsold of Specific Make(Toyota) ADs', (done) => {
      api
        .get('/api/v1/car?status=available&manufacturer=toyota')
        .end((err, res) => {
          res.body.should.be.a('object');
          res.body.should.have.property('status').equal(200);
          res.body.should.have.property('success').equal('true');
          res.body.should.have.property('data');
          res.body.data.should.be.a('array');
          const firstItem = res.body.data[0];
          firstItem.should.have.property('status').equal('available');
          firstItem.should.have.property('make').equal('toyota');
          expect(firstItem)
            .to.have.nested.property('body.data[0]')
            .that.includes.all.keys(['id', 'owner', 'created_on',
            'state', 'status', 'price', 'manufacturer', 'model', 'body_type']);
            firstItem.id.should.be.a('integer');
            firstItem.owner.should.be.a('integer');
            firstItem.created_on.should.be.a('string');
            firstItem.state.should.be.a('string');
            firstItem.should.have.property('status').equal('available');
            firstItem.price.should.be.a('float');
            firstItem.manufacturer.should.be.a('float');
            firstItem.model.should.be.a('string');
            firstItem.body_type.should.be.a('float');
            done();
          });
    });
  
    it('Should let viewer to view all unsold of Specific Body Type ADs', (done) => {
      api
        .get('/api/v1/car?status=available&bodyType=salon')
        .end((err, res) => {
          res.body.should.be.a('object');
          res.body.should.have.property('status').equal(200);
          res.body.should.have.property('success').equal('true');
          res.body.should.have.property('data');
          res.body.data.should.be.a('array');
          const firstItem = res.body.data[0];
          firstItem.should.have.property('status').equal('available');
          firstItem.should.have.property('bodyType').equal('salon');
          expect(firstItem)
            .to.have.nested.property('body.data[0]')
            .that.includes.all.keys(['id', 'owner', 'created_on',
            'state', 'status', 'price', 'manufacturer', 'model', 'body_type']);
            firstItem.id.should.be.a('integer');
            firstItem.owner.should.be.a('integer');
            firstItem.created_on.should.be.a('string');
            firstItem.state.should.be.a('string');
            firstItem.should.have.property('status').equal('available');
            firstItem.price.should.be.a('float');
            firstItem.manufacturer.should.be.a('float');
            firstItem.model.should.be.a('string');
            firstItem.body_type.should.be.a('float');
            done();
          });
    });
  
    it('Should let viewer to view all unsold of Specific BodyType, Manufacturer, model ADs', (done) => {
      api
        .get('/api/v1/car?status=available&bodyType=salon&manufacturer=toyota&model=venza')
        .end((err, res) => {
          res.body.should.be.a('object');
          res.body.should.have.property('status').equal(200);
          res.body.should.have.property('success').equal('true');
          res.body.should.have.property('data');
          res.body.data.should.be.a('array');
          const firstItem = res.body.data[0];
          firstItem.should.have.property('status').equal('available');
          firstItem.should.have.property('bodyType').equal('salon');
          firstItem.should.have.property('manufacturer').equal('toyota');
          firstItem.should.have.property('model').equal('venza');
          expect(firstItem)
            .to.have.nested.property('body.data[0]')
            .that.includes.all.keys(['id', 'owner', 'created_on',
            'state', 'status', 'price', 'manufacturer', 'model', 'body_type']);
            firstItem.id.should.be.a('integer');
            firstItem.owner.should.be.a('integer');
            firstItem.created_on.should.be.a('string');
            firstItem.state.should.be.a('string');
            firstItem.should.have.property('status').equal('available');
            firstItem.price.should.be.a('float');
            firstItem.manufacturer.should.be.a('float');
            firstItem.model.should.be.a('string');
            firstItem.body_type.should.be.a('float');
            done();
          });
    });
    */});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJfdmlld2VyX3Rlc3QuanMiXSwibmFtZXMiOlsiY2hhaSIsInVzZSIsImNoYWlIdHRwIiwic2hvdWxkIiwiZXhwZWN0IiwiYXBpIiwicmVxdWVzdCIsImRlc2NyaWJlIiwiaXQiLCJkb25lIiwiZ2V0IiwiZW5kIiwiZXJyIiwicmVzIiwiYm9keSIsImJlIiwiYSIsImhhdmUiLCJwcm9wZXJ0eSIsImVxdWFsIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOzs7O0FBRkE7QUFJQUEsaUJBQUtDLEdBQUwsQ0FBU0Msb0JBQVQ7O0FBRUFGLGlCQUFLRyxNQUFMOztJQUNRQyxNLEdBQVdKLGdCLENBQVhJLE07O0FBRVIsSUFBTUMsR0FBRyxHQUFHTCxpQkFBS00sT0FBTCxDQUFhLHVCQUFiLENBQVo7O0FBR0FDLFFBQVEsQ0FBQyx3QkFBRCxFQUEyQixZQUFNO0FBQ3ZDQyxFQUFBQSxFQUFFLENBQUMsa0ZBQUQsRUFBcUYsVUFBQ0MsSUFBRCxFQUFVO0FBQy9GSixJQUFBQSxHQUFHLENBQ0FLLEdBREgsQ0FDTyxxQkFEUCxFQUVHQyxHQUZILENBRU8sVUFBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQWM7QUFDakJBLE1BQUFBLEdBQUcsQ0FBQ0MsSUFBSixDQUFTWCxNQUFULENBQWdCWSxFQUFoQixDQUFtQkMsQ0FBbkIsQ0FBcUIsUUFBckI7QUFDQUgsTUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVNYLE1BQVQsQ0FBZ0JjLElBQWhCLENBQXFCQyxRQUFyQixDQUE4QixRQUE5QixFQUF3Q0MsS0FBeEMsQ0FBOEMsR0FBOUM7QUFDQU4sTUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVNYLE1BQVQsQ0FBZ0JjLElBQWhCLENBQXFCQyxRQUFyQixDQUE4QixTQUE5QixFQUF5Q0MsS0FBekMsQ0FBK0MsT0FBL0M7QUFDQU4sTUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVNYLE1BQVQsQ0FBZ0JjLElBQWhCLENBQXFCQyxRQUFyQixDQUE4QixPQUE5QixFQUF1Q0MsS0FBdkMsQ0FBNkMsc0NBQTdDO0FBQ0FWLE1BQUFBLElBQUk7QUFDTCxLQVJIO0FBU0QsR0FWQyxDQUFGO0FBWUFELEVBQUFBLEVBQUUsQ0FBQyxzREFBRCxFQUF5RCxVQUFDQyxJQUFELEVBQVU7QUFDbkVKLElBQUFBLEdBQUcsQ0FDQUssR0FESCxDQUNPLGlCQURQLEVBRUdDLEdBRkgsQ0FFTyxVQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUNqQkEsTUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVNYLE1BQVQsQ0FBZ0JZLEVBQWhCLENBQW1CQyxDQUFuQixDQUFxQixRQUFyQjtBQUNBSCxNQUFBQSxHQUFHLENBQUNDLElBQUosQ0FBU1gsTUFBVCxDQUFnQmMsSUFBaEIsQ0FBcUJDLFFBQXJCLENBQThCLFFBQTlCLEVBQXdDQyxLQUF4QyxDQUE4QyxHQUE5QztBQUNBTixNQUFBQSxHQUFHLENBQUNDLElBQUosQ0FBU1gsTUFBVCxDQUFnQmMsSUFBaEIsQ0FBcUJDLFFBQXJCLENBQThCLFNBQTlCLEVBQXlDQyxLQUF6QyxDQUErQyxPQUEvQztBQUNBTixNQUFBQSxHQUFHLENBQUNDLElBQUosQ0FBU1gsTUFBVCxDQUFnQmMsSUFBaEIsQ0FBcUJDLFFBQXJCLENBQThCLE9BQTlCLEVBQXVDQyxLQUF2QyxDQUE2QyxlQUE3QztBQUNBVixNQUFBQSxJQUFJO0FBQ0wsS0FSSDtBQVNELEdBVkMsQ0FBRjtBQVdGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXlPQyxDQWpRTyxDQUFSIiwic291cmNlUm9vdCI6Ii9ob21lL3NhbWkvRG9jdW1lbnRzL0F1dG9NYXJ0L3Rlc3QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCBjaGFpSHR0cCBmcm9tICdjaGFpLWh0dHAnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCB1dGlsIGZyb20gJ3V0aWwnO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG5pbXBvcnQgYXBwIGZyb20gJy4uL3NyYy9hcHAnO1xuaW1wb3J0IGFzc3VtZWREYXRhIGZyb20gJy4vYXNzdW1lZC9hc3N1bWUnO1xuXG5jaGFpLnVzZShjaGFpSHR0cCk7XG5cbmNoYWkuc2hvdWxkKCk7XG5jb25zdCB7IGV4cGVjdCB9ID0gY2hhaTtcblxuY29uc3QgYXBpID0gY2hhaS5yZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAnKTtcblxuXG5kZXNjcmliZSgnVXNlciBWaWV3ZXIgQWN0aXZpdGllcycsICgpID0+IHtcbiAgaXQoJ3Nob3VsZCByZXNwb25kIHRvIHZpZXdlciB0cnlpbmcgdG8gdmlldyBhIHNwZWNpZmljIEFEIHdpdGhvdXQgdmFsaWQgQUQgcmVmZXJlbmNlJywgKGRvbmUpID0+IHtcbiAgICBhcGlcbiAgICAgIC5nZXQoJy9hcGkvdjEvY2FyLzpjYXJJZC8nKVxuICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcbiAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmJlLmEoJ29iamVjdCcpO1xuICAgICAgICByZXMuYm9keS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3RhdHVzJykuZXF1YWwoNDAxKTtcbiAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmhhdmUucHJvcGVydHkoJ3N1Y2Nlc3MnKS5lcXVhbCgnZmFsc2UnKTtcbiAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmhhdmUucHJvcGVydHkoJ2Vycm9yJykuZXF1YWwoJ1BsZWFzZSBwcm92aWRlIGEgdmFsaWQgQWQgcmVmZXJlbmNlIScpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ1Nob3VsZCByZXNwb25kIHRvIHZpZXdlciBvbiBhbiBBRCB0aGF0IGRvZXNudCBleGlzdCAnLCAoZG9uZSkgPT4ge1xuICAgIGFwaVxuICAgICAgLmdldCgnL2FwaS92MS9jYXIvMTIvJylcbiAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5iZS5hKCdvYmplY3QnKTtcbiAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmhhdmUucHJvcGVydHkoJ3N0YXR1cycpLmVxdWFsKDQwNCk7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdWNjZXNzJykuZXF1YWwoJ2ZhbHNlJyk7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdlcnJvcicpLmVxdWFsKCdBZCBub3QgZm91bmQhJyk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICB9KTtcbi8qXG4gICAgaXQoJ1Nob3VsZCBsZXQgdmlld2VyIHZpZXcgYSBzcGVjaWZpYyBBRCBzdWNjZXNzZnVsbHknLCAoZG9uZSkgPT4ge1xuICAgICAgYXBpXG4gICAgICAgIC5nZXQoYC9hcGkvdjEvY2FyLyR7Y2FySWR9L2ApXG4gICAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmJlLmEoJ29iamVjdCcpO1xuICAgICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdGF0dXMnKS5lcXVhbCgyMDApO1xuICAgICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdWNjZXNzJykuZXF1YWwoJ3RydWUnKTtcbiAgICAgICAgICBleHBlY3QocmVzKVxuICAgICAgICAgIC50by5oYXZlLm5lc3RlZC5wcm9wZXJ0eSgnYm9keS5kYXRhJylcbiAgICAgICAgICAudGhhdC5pbmNsdWRlcy5hbGwua2V5cyhbJ2lkJywgJ2VtYWlsJywgJ2NyZWF0ZWRfb24nLCAnbWFudWZhY3R1cmVyJywgJ21vZGVsJyxcbiAgICAgICAgICAgICAgJ3ByaWNlJywgJ3N0YXRlJywgJ3N0YXR1cycsICdpbWFnZUdhbGxlcnknXSk7XG4gICAgICAgICAgcmVzLmJvZHkuZGF0YS5pZC5zaG91bGQuYmUuYSgnbnVtYmVyJyk7XG4gICAgICAgICAgcmVzLmJvZHkuZGF0YS5lbWFpbC5zaG91bGQuYmUuYSgnc3RyaW5nJyk7XG4gICAgICAgICAgcmVzLmJvZHkuZGF0YS5jcmVhdGVkX29uLnNob3VsZC5iZS5hKCdzdHJpbmcnKTtcbiAgICAgICAgICByZXMuYm9keS5kYXRhLm1hbnVmYWN0dXJlci5zaG91bGQuYmUuYSgnc3RyaW5nJyk7XG4gICAgICAgICAgcmVzLmJvZHkuZGF0YS5tb2RlbC5zaG91bGQuYmUuYSgnc3RyaW5nJyk7XG4gICAgICAgICAgcmVzLmJvZHkuZGF0YS5wcmljZS5zaG91bGQuYmUuYSgnbnVtYmVyJyk7XG4gICAgICAgICAgcmVzLmJvZHkuZGF0YS5zdGF0ZS5zaG91bGQuYmUuYSgnc3RyaW5nJyk7XG4gICAgICAgICAgcmVzLmJvZHkuZGF0YS5zdGF0dXMuc2hvdWxkLmJlLmEoJ3N0cmluZycpO1xuICAgICAgICAgIHJlcy5ib2R5LmRhdGEuaW1hZ2VHYWxsZXJ5LnNob3VsZC5iZS5hKCdhcnJheScpO1xuICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnU2hvdWxkIGxldCB2aWV3ZXIgdmlldyBhbGwgYXZhaWxhYmxlIEFEIHN1Y2Nlc3NmdWxseScsIChkb25lKSA9PiB7XG4gICAgICBhcGlcbiAgICAgICAgLmdldChgL2FwaS92MS9jYXI/c3RhdHVzPWF2YWlsYWJsZWApXG4gICAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmJlLmEoJ29iamVjdCcpO1xuICAgICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdGF0dXMnKS5lcXVhbCgyMDApO1xuICAgICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdWNjZXNzJykuZXF1YWwoJ3RydWUnKTtcbiAgICAgICAgICByZXMuYm9keS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnZGF0YScpO1xuICAgICAgICAgIHJlcy5ib2R5LmRhdGEuc2hvdWxkLmJlLmEoJ2FycmF5Jyk7XG4gICAgICAgICAgY29uc3QgZmlyc3RJdGVtID0gcmVzLmJvZHkuZGF0YVswXTtcbiAgICAgICAgICBmaXJzdEl0ZW0uc2hvdWxkLmhhdmUucHJvcGVydHkoJ3N0YXR1cycpLmVxdWFsKCdhdmFpbGFibGUnKTtcbiAgICAgICAgICBleHBlY3QoZmlyc3RJdGVtKVxuICAgICAgICAgICAgLnRvLmhhdmUubmVzdGVkLnByb3BlcnR5KCdib2R5LmRhdGFbMF0nKVxuICAgICAgICAgICAgLnRoYXQuaW5jbHVkZXMuYWxsLmtleXMoWydpZCcsICdvd25lcicsICdjcmVhdGVkX29uJyxcbiAgICAgICAgICAgICdzdGF0ZScsICdzdGF0dXMnLCAncHJpY2UnLCAnbWFudWZhY3R1cmVyJywgJ21vZGVsJywgJ2JvZHlfdHlwZSddKTtcbiAgICAgICAgICAgIGZpcnN0SXRlbS5pZC5zaG91bGQuYmUuYSgnaW50ZWdlcicpO1xuICAgICAgICAgICAgZmlyc3RJdGVtLm93bmVyLnNob3VsZC5iZS5hKCdpbnRlZ2VyJyk7XG4gICAgICAgICAgICBmaXJzdEl0ZW0uY3JlYXRlZF9vbi5zaG91bGQuYmUuYSgnc3RyaW5nJyk7XG4gICAgICAgICAgICBmaXJzdEl0ZW0uc3RhdGUuc2hvdWxkLmJlLmEoJ3N0cmluZycpO1xuICAgICAgICAgICAgZmlyc3RJdGVtLnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdGF0dXMnKS5lcXVhbCgnYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICBmaXJzdEl0ZW0ucHJpY2Uuc2hvdWxkLmJlLmEoJ2Zsb2F0Jyk7XG4gICAgICAgICAgICBmaXJzdEl0ZW0ubWFudWZhY3R1cmVyLnNob3VsZC5iZS5hKCdmbG9hdCcpO1xuICAgICAgICAgICAgZmlyc3RJdGVtLm1vZGVsLnNob3VsZC5iZS5hKCdzdHJpbmcnKTtcbiAgICAgICAgICAgIGZpcnN0SXRlbS5ib2R5X3R5cGUuc2hvdWxkLmJlLmEoJ2Zsb2F0Jyk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgfSk7XG4gICAgfSk7XG5cblxuICBpdCgnU2hvdWxkIGxldCBWaWV3ZXIgVmlldyBhbGwgdW5zb2xkIGNhcnMgd2l0aGluIGEgcHJpY2UgcmFuZ2UnLCAoZG9uZSkgPT4ge1xuICAgICAgY29uc3QgbWluUHJpY2UgPSAyMDAuMDA7XG4gICAgICBjb25zdCBtYXhQcmljZSA9IDEwMDAuMDA7XG5cbiAgICAgIGNvbnN0IGxlYXN0VmFsdWUgPSAoYmFzZSkgPT4ge1xuICAgICAgICBpZiAobWluUHJpY2UgPD0gYmFzZSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vc3RWYWx1ZSA9IChiYXNlKSA9PiB7XG4gICAgICAgIGlmIChtYXhQcmljZSA+PSBiYXNlKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfTtcbiAgICAgIGFwaVxuICAgICAgLmdldChgL2FwaS92MS9jYXI/c3RhdHVzPWF2YWlsYWJsZSZtaW5QcmljZT3igIske21pblByaWNlfeKAiyZtYXhQcmljZT3igIske21heFByaWNlfWApXG4gICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xuICAgICAgICByZXMuYm9keS5zaG91bGQuYmUuYSgnb2JqZWN0Jyk7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdGF0dXMnKS5lcXVhbCgyMDApO1xuICAgICAgICByZXMuYm9keS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3VjY2VzcycpLmVxdWFsKCd0cnVlJyk7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdkYXRhJyk7XG4gICAgICAgIHJlcy5ib2R5LmRhdGEuc2hvdWxkLmJlLmEoJ2FycmF5Jyk7XG4gICAgICAgIHJlcy5ib2R5LmRhdGFbMF0uc2hvdWxkLmJlLmEoJ29iamVjdCcpO1xuICAgICAgICBleHBlY3QobGVhc3RWYWx1ZShyZXMuYm9keS5kYXRhWzBdLnByaWNlKSkudG8uZXF1YWwodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChtb3N0VmFsdWUocmVzLmJvZHkuZGF0YVswXS5wcmljZSkpLnRvLmVxdWFsKHRydWUpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ1Nob3VsZCBsZXQgdmlld2VyIHRvIHZpZXcgYWxsIHVuc29sZCBhbmQgTmV3IEFEcycsIChkb25lKSA9PiB7XG4gICAgYXBpXG4gICAgICAuZ2V0KCcvYXBpL3YxL2Nhcj9zdGF0dXM9YXZhaWxhYmxlJnN0YXRlPW5ldycpXG4gICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xuICAgICAgICByZXMuYm9keS5zaG91bGQuYmUuYSgnb2JqZWN0Jyk7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdGF0dXMnKS5lcXVhbCgyMDApO1xuICAgICAgICByZXMuYm9keS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3VjY2VzcycpLmVxdWFsKCd0cnVlJyk7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdkYXRhJyk7XG4gICAgICAgIHJlcy5ib2R5LmRhdGEuc2hvdWxkLmJlLmEoJ2FycmF5Jyk7XG4gICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHJlcy5ib2R5LmRhdGFbMF07XG4gICAgICAgIGZpcnN0SXRlbS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3RhdHVzJykuZXF1YWwoJ2F2YWlsYWJsZScpO1xuICAgICAgICBmaXJzdEl0ZW0uc2hvdWxkLmhhdmUucHJvcGVydHkoJ3N0YXRlJykuZXF1YWwoJ25ldycpO1xuICAgICAgICBleHBlY3QoZmlyc3RJdGVtKVxuICAgICAgICAgIC50by5oYXZlLm5lc3RlZC5wcm9wZXJ0eSgnYm9keS5kYXRhWzBdJylcbiAgICAgICAgICAudGhhdC5pbmNsdWRlcy5hbGwua2V5cyhbJ2lkJywgJ293bmVyJywgJ2NyZWF0ZWRfb24nLFxuICAgICAgICAgICdzdGF0ZScsICdzdGF0dXMnLCAncHJpY2UnLCAnbWFudWZhY3R1cmVyJywgJ21vZGVsJywgJ2JvZHlfdHlwZSddKTtcbiAgICAgICAgICBmaXJzdEl0ZW0uaWQuc2hvdWxkLmJlLmEoJ2ludGVnZXInKTtcbiAgICAgICAgICBmaXJzdEl0ZW0ub3duZXIuc2hvdWxkLmJlLmEoJ2ludGVnZXInKTtcbiAgICAgICAgICBmaXJzdEl0ZW0uY3JlYXRlZF9vbi5zaG91bGQuYmUuYSgnc3RyaW5nJyk7XG4gICAgICAgICAgZmlyc3RJdGVtLnN0YXRlLnNob3VsZC5iZS5hKCdzdHJpbmcnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0uc2hvdWxkLmhhdmUucHJvcGVydHkoJ3N0YXR1cycpLmVxdWFsKCdhdmFpbGFibGUnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0ucHJpY2Uuc2hvdWxkLmJlLmEoJ2Zsb2F0Jyk7XG4gICAgICAgICAgZmlyc3RJdGVtLm1hbnVmYWN0dXJlci5zaG91bGQuYmUuYSgnZmxvYXQnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0ubW9kZWwuc2hvdWxkLmJlLmEoJ3N0cmluZycpO1xuICAgICAgICAgIGZpcnN0SXRlbS5ib2R5X3R5cGUuc2hvdWxkLmJlLmEoJ2Zsb2F0Jyk7XG4gICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ1Nob3VsZCBsZXQgdmlld2VyIHRvIHZpZXcgYWxsIHVuc29sZCBhbmQgVXNlZCBBRHMnLCAoZG9uZSkgPT4ge1xuICAgIGFwaVxuICAgICAgLmdldCgnL2FwaS92MS9jYXI/c3RhdHVzPWF2YWlsYWJsZSZzdGF0ZT11c2VkJylcbiAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5iZS5hKCdvYmplY3QnKTtcbiAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmhhdmUucHJvcGVydHkoJ3N0YXR1cycpLmVxdWFsKDIwMCk7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdWNjZXNzJykuZXF1YWwoJ3RydWUnKTtcbiAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmhhdmUucHJvcGVydHkoJ2RhdGEnKTtcbiAgICAgICAgcmVzLmJvZHkuZGF0YS5zaG91bGQuYmUuYSgnYXJyYXknKTtcbiAgICAgICAgY29uc3QgZmlyc3RJdGVtID0gcmVzLmJvZHkuZGF0YVswXTtcbiAgICAgICAgZmlyc3RJdGVtLnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdGF0dXMnKS5lcXVhbCgnYXZhaWxhYmxlJyk7XG4gICAgICAgIGZpcnN0SXRlbS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3RhdGUnKS5lcXVhbCgndXNlZCcpO1xuICAgICAgICBleHBlY3QoZmlyc3RJdGVtKVxuICAgICAgICAgIC50by5oYXZlLm5lc3RlZC5wcm9wZXJ0eSgnYm9keS5kYXRhWzBdJylcbiAgICAgICAgICAudGhhdC5pbmNsdWRlcy5hbGwua2V5cyhbJ2lkJywgJ293bmVyJywgJ2NyZWF0ZWRfb24nLFxuICAgICAgICAgICdzdGF0ZScsICdzdGF0dXMnLCAncHJpY2UnLCAnbWFudWZhY3R1cmVyJywgJ21vZGVsJywgJ2JvZHlfdHlwZSddKTtcbiAgICAgICAgICBmaXJzdEl0ZW0uaWQuc2hvdWxkLmJlLmEoJ2ludGVnZXInKTtcbiAgICAgICAgICBmaXJzdEl0ZW0ub3duZXIuc2hvdWxkLmJlLmEoJ2ludGVnZXInKTtcbiAgICAgICAgICBmaXJzdEl0ZW0uY3JlYXRlZF9vbi5zaG91bGQuYmUuYSgnc3RyaW5nJyk7XG4gICAgICAgICAgZmlyc3RJdGVtLnN0YXRlLnNob3VsZC5iZS5hKCdzdHJpbmcnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0uc2hvdWxkLmhhdmUucHJvcGVydHkoJ3N0YXR1cycpLmVxdWFsKCdhdmFpbGFibGUnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0ucHJpY2Uuc2hvdWxkLmJlLmEoJ2Zsb2F0Jyk7XG4gICAgICAgICAgZmlyc3RJdGVtLm1hbnVmYWN0dXJlci5zaG91bGQuYmUuYSgnZmxvYXQnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0ubW9kZWwuc2hvdWxkLmJlLmEoJ3N0cmluZycpO1xuICAgICAgICAgIGZpcnN0SXRlbS5ib2R5X3R5cGUuc2hvdWxkLmJlLmEoJ2Zsb2F0Jyk7XG4gICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ1Nob3VsZCBsZXQgdmlld2VyIHRvIHZpZXcgYWxsIHVuc29sZCBvZiBTcGVjaWZpYyBNYWtlKFRveW90YSkgQURzJywgKGRvbmUpID0+IHtcbiAgICBhcGlcbiAgICAgIC5nZXQoJy9hcGkvdjEvY2FyP3N0YXR1cz1hdmFpbGFibGUmbWFudWZhY3R1cmVyPXRveW90YScpXG4gICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xuICAgICAgICByZXMuYm9keS5zaG91bGQuYmUuYSgnb2JqZWN0Jyk7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdGF0dXMnKS5lcXVhbCgyMDApO1xuICAgICAgICByZXMuYm9keS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3VjY2VzcycpLmVxdWFsKCd0cnVlJyk7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdkYXRhJyk7XG4gICAgICAgIHJlcy5ib2R5LmRhdGEuc2hvdWxkLmJlLmEoJ2FycmF5Jyk7XG4gICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHJlcy5ib2R5LmRhdGFbMF07XG4gICAgICAgIGZpcnN0SXRlbS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3RhdHVzJykuZXF1YWwoJ2F2YWlsYWJsZScpO1xuICAgICAgICBmaXJzdEl0ZW0uc2hvdWxkLmhhdmUucHJvcGVydHkoJ21ha2UnKS5lcXVhbCgndG95b3RhJyk7XG4gICAgICAgIGV4cGVjdChmaXJzdEl0ZW0pXG4gICAgICAgICAgLnRvLmhhdmUubmVzdGVkLnByb3BlcnR5KCdib2R5LmRhdGFbMF0nKVxuICAgICAgICAgIC50aGF0LmluY2x1ZGVzLmFsbC5rZXlzKFsnaWQnLCAnb3duZXInLCAnY3JlYXRlZF9vbicsXG4gICAgICAgICAgJ3N0YXRlJywgJ3N0YXR1cycsICdwcmljZScsICdtYW51ZmFjdHVyZXInLCAnbW9kZWwnLCAnYm9keV90eXBlJ10pO1xuICAgICAgICAgIGZpcnN0SXRlbS5pZC5zaG91bGQuYmUuYSgnaW50ZWdlcicpO1xuICAgICAgICAgIGZpcnN0SXRlbS5vd25lci5zaG91bGQuYmUuYSgnaW50ZWdlcicpO1xuICAgICAgICAgIGZpcnN0SXRlbS5jcmVhdGVkX29uLnNob3VsZC5iZS5hKCdzdHJpbmcnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0uc3RhdGUuc2hvdWxkLmJlLmEoJ3N0cmluZycpO1xuICAgICAgICAgIGZpcnN0SXRlbS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3RhdHVzJykuZXF1YWwoJ2F2YWlsYWJsZScpO1xuICAgICAgICAgIGZpcnN0SXRlbS5wcmljZS5zaG91bGQuYmUuYSgnZmxvYXQnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0ubWFudWZhY3R1cmVyLnNob3VsZC5iZS5hKCdmbG9hdCcpO1xuICAgICAgICAgIGZpcnN0SXRlbS5tb2RlbC5zaG91bGQuYmUuYSgnc3RyaW5nJyk7XG4gICAgICAgICAgZmlyc3RJdGVtLmJvZHlfdHlwZS5zaG91bGQuYmUuYSgnZmxvYXQnKTtcbiAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuICB9KTtcblxuICBpdCgnU2hvdWxkIGxldCB2aWV3ZXIgdG8gdmlldyBhbGwgdW5zb2xkIG9mIFNwZWNpZmljIEJvZHkgVHlwZSBBRHMnLCAoZG9uZSkgPT4ge1xuICAgIGFwaVxuICAgICAgLmdldCgnL2FwaS92MS9jYXI/c3RhdHVzPWF2YWlsYWJsZSZib2R5VHlwZT1zYWxvbicpXG4gICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xuICAgICAgICByZXMuYm9keS5zaG91bGQuYmUuYSgnb2JqZWN0Jyk7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdzdGF0dXMnKS5lcXVhbCgyMDApO1xuICAgICAgICByZXMuYm9keS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3VjY2VzcycpLmVxdWFsKCd0cnVlJyk7XG4gICAgICAgIHJlcy5ib2R5LnNob3VsZC5oYXZlLnByb3BlcnR5KCdkYXRhJyk7XG4gICAgICAgIHJlcy5ib2R5LmRhdGEuc2hvdWxkLmJlLmEoJ2FycmF5Jyk7XG4gICAgICAgIGNvbnN0IGZpcnN0SXRlbSA9IHJlcy5ib2R5LmRhdGFbMF07XG4gICAgICAgIGZpcnN0SXRlbS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3RhdHVzJykuZXF1YWwoJ2F2YWlsYWJsZScpO1xuICAgICAgICBmaXJzdEl0ZW0uc2hvdWxkLmhhdmUucHJvcGVydHkoJ2JvZHlUeXBlJykuZXF1YWwoJ3NhbG9uJyk7XG4gICAgICAgIGV4cGVjdChmaXJzdEl0ZW0pXG4gICAgICAgICAgLnRvLmhhdmUubmVzdGVkLnByb3BlcnR5KCdib2R5LmRhdGFbMF0nKVxuICAgICAgICAgIC50aGF0LmluY2x1ZGVzLmFsbC5rZXlzKFsnaWQnLCAnb3duZXInLCAnY3JlYXRlZF9vbicsXG4gICAgICAgICAgJ3N0YXRlJywgJ3N0YXR1cycsICdwcmljZScsICdtYW51ZmFjdHVyZXInLCAnbW9kZWwnLCAnYm9keV90eXBlJ10pO1xuICAgICAgICAgIGZpcnN0SXRlbS5pZC5zaG91bGQuYmUuYSgnaW50ZWdlcicpO1xuICAgICAgICAgIGZpcnN0SXRlbS5vd25lci5zaG91bGQuYmUuYSgnaW50ZWdlcicpO1xuICAgICAgICAgIGZpcnN0SXRlbS5jcmVhdGVkX29uLnNob3VsZC5iZS5hKCdzdHJpbmcnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0uc3RhdGUuc2hvdWxkLmJlLmEoJ3N0cmluZycpO1xuICAgICAgICAgIGZpcnN0SXRlbS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3RhdHVzJykuZXF1YWwoJ2F2YWlsYWJsZScpO1xuICAgICAgICAgIGZpcnN0SXRlbS5wcmljZS5zaG91bGQuYmUuYSgnZmxvYXQnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0ubWFudWZhY3R1cmVyLnNob3VsZC5iZS5hKCdmbG9hdCcpO1xuICAgICAgICAgIGZpcnN0SXRlbS5tb2RlbC5zaG91bGQuYmUuYSgnc3RyaW5nJyk7XG4gICAgICAgICAgZmlyc3RJdGVtLmJvZHlfdHlwZS5zaG91bGQuYmUuYSgnZmxvYXQnKTtcbiAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuICB9KTtcblxuICBpdCgnU2hvdWxkIGxldCB2aWV3ZXIgdG8gdmlldyBhbGwgdW5zb2xkIG9mIFNwZWNpZmljIEJvZHlUeXBlLCBNYW51ZmFjdHVyZXIsIG1vZGVsIEFEcycsIChkb25lKSA9PiB7XG4gICAgYXBpXG4gICAgICAuZ2V0KCcvYXBpL3YxL2Nhcj9zdGF0dXM9YXZhaWxhYmxlJmJvZHlUeXBlPXNhbG9uJm1hbnVmYWN0dXJlcj10b3lvdGEmbW9kZWw9dmVuemEnKVxuICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcbiAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmJlLmEoJ29iamVjdCcpO1xuICAgICAgICByZXMuYm9keS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnc3RhdHVzJykuZXF1YWwoMjAwKTtcbiAgICAgICAgcmVzLmJvZHkuc2hvdWxkLmhhdmUucHJvcGVydHkoJ3N1Y2Nlc3MnKS5lcXVhbCgndHJ1ZScpO1xuICAgICAgICByZXMuYm9keS5zaG91bGQuaGF2ZS5wcm9wZXJ0eSgnZGF0YScpO1xuICAgICAgICByZXMuYm9keS5kYXRhLnNob3VsZC5iZS5hKCdhcnJheScpO1xuICAgICAgICBjb25zdCBmaXJzdEl0ZW0gPSByZXMuYm9keS5kYXRhWzBdO1xuICAgICAgICBmaXJzdEl0ZW0uc2hvdWxkLmhhdmUucHJvcGVydHkoJ3N0YXR1cycpLmVxdWFsKCdhdmFpbGFibGUnKTtcbiAgICAgICAgZmlyc3RJdGVtLnNob3VsZC5oYXZlLnByb3BlcnR5KCdib2R5VHlwZScpLmVxdWFsKCdzYWxvbicpO1xuICAgICAgICBmaXJzdEl0ZW0uc2hvdWxkLmhhdmUucHJvcGVydHkoJ21hbnVmYWN0dXJlcicpLmVxdWFsKCd0b3lvdGEnKTtcbiAgICAgICAgZmlyc3RJdGVtLnNob3VsZC5oYXZlLnByb3BlcnR5KCdtb2RlbCcpLmVxdWFsKCd2ZW56YScpO1xuICAgICAgICBleHBlY3QoZmlyc3RJdGVtKVxuICAgICAgICAgIC50by5oYXZlLm5lc3RlZC5wcm9wZXJ0eSgnYm9keS5kYXRhWzBdJylcbiAgICAgICAgICAudGhhdC5pbmNsdWRlcy5hbGwua2V5cyhbJ2lkJywgJ293bmVyJywgJ2NyZWF0ZWRfb24nLFxuICAgICAgICAgICdzdGF0ZScsICdzdGF0dXMnLCAncHJpY2UnLCAnbWFudWZhY3R1cmVyJywgJ21vZGVsJywgJ2JvZHlfdHlwZSddKTtcbiAgICAgICAgICBmaXJzdEl0ZW0uaWQuc2hvdWxkLmJlLmEoJ2ludGVnZXInKTtcbiAgICAgICAgICBmaXJzdEl0ZW0ub3duZXIuc2hvdWxkLmJlLmEoJ2ludGVnZXInKTtcbiAgICAgICAgICBmaXJzdEl0ZW0uY3JlYXRlZF9vbi5zaG91bGQuYmUuYSgnc3RyaW5nJyk7XG4gICAgICAgICAgZmlyc3RJdGVtLnN0YXRlLnNob3VsZC5iZS5hKCdzdHJpbmcnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0uc2hvdWxkLmhhdmUucHJvcGVydHkoJ3N0YXR1cycpLmVxdWFsKCdhdmFpbGFibGUnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0ucHJpY2Uuc2hvdWxkLmJlLmEoJ2Zsb2F0Jyk7XG4gICAgICAgICAgZmlyc3RJdGVtLm1hbnVmYWN0dXJlci5zaG91bGQuYmUuYSgnZmxvYXQnKTtcbiAgICAgICAgICBmaXJzdEl0ZW0ubW9kZWwuc2hvdWxkLmJlLmEoJ3N0cmluZycpO1xuICAgICAgICAgIGZpcnN0SXRlbS5ib2R5X3R5cGUuc2hvdWxkLmJlLmEoJ2Zsb2F0Jyk7XG4gICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcbiAgfSk7XG4gICovXG59KSJdfQ==