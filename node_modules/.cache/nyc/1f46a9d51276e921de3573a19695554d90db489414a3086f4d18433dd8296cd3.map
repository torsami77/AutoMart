{"version":3,"sources":["admin_test.js"],"names":["chai","use","chaiHttp","should","expect","api","request","data","fs","readFileSync","__dirname","token","toString","describe","it","done","get","set","end","err","res","body","be","a","have","property","equal","adminToken","post","send","assumedData","admin"],"mappings":"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","sourceRoot":"/home/sami/Documents/AutoMart/test","sourcesContent":["import chai from 'chai';\nimport chaiHttp from 'chai-http';\nimport fs from 'fs';\n// eslint-disable-next-line no-unused-vars\nimport app from '../src/app';\nimport db from '../src/db/db';\nimport assumedData from './assumed/assume';\n\nchai.use(chaiHttp);\n\nchai.should();\nconst { expect } = chai;\n\nconst api = chai.request('http://localhost:5000');\n\nconst data = fs.readFileSync(`${__dirname}/assumed/token.txt`);\nconst token = data.toString();\n\ndescribe('ADMIN Activities', () => {\n  it('should NOT let NON-ADMIN user to view sold AD', (done) => {\n    api\n      .get('/api/v1/car/')\n      .set('authorization', token)\n      .end((err, res) => {\n        res.body.should.be.a('object');\n        res.body.should.have.property('status').equal(403);\n        res.body.should.have.property('success').equal('false');\n        res.body.should.have.property('error').equal('You need Admin priviledges to view this set of data!');\n        done();\n      });\n  });\n/*\n  it('should NOT let NON-ADMIN user to DELETE an AD', (done) => {\n    api\n      .delete('/api/v1/car/1/')\n      .set('authorization', token)\n      .end((err, res) => {\n        res.body.should.be.a('object');\n        res.body.should.have.property('status').equal(404);\n        res.body.should.have.property('success').equal('false');\n        res.body.should.have.property('error').equal('You need Admin priviledges to view this set of data!');\n        done();\n      });\n  });\n  */\n  let adminToken;\n  it('AUTHENTICATE ADMIN', (done) => {\n    api\n      .post('/api/v1/signin')\n      .send(assumedData.admin)\n      .end((err, res) => {\n        res.body.data.should.have.property('token');\n        res.body.data.token.should.be.a('string');\n        adminToken = res.body.data.token;\n        done();\n      });\n  });\n\n  it('should let ADMIN user to view all AD including sold AD', (done) => {\n    api\n      .get('/api/v1/car/')\n      .set('authorization', adminToken)\n      .end((err, res) => {\n        res.body.should.be.a('object');\n        res.body.should.have.property('status').equal(200);\n        res.body.should.have.property('success').equal('true');\n        res.body.data.should.be.a('array');\n        done();\n      });\n  });\n\n  it('should respond to ADMIN\"s attempt to DELETE AD without reference', (done) => {\n    api\n      .delete('/api/v1/car/:carId/')\n      .set('authorization', adminToken)\n      .end((err, res) => {\n        res.body.should.be.a('object');\n        res.body.should.have.property('status').equal(401);\n        res.body.should.have.property('success').equal('false');\n        res.body.should.have.property('error').equal('Please provide a valid Ad reference!');\n        done();\n      });\n  });\n\n  it('should respond to ADMIN\"s attempt to DELETE non-exitent AD', (done) => {\n    api\n      .delete('/api/v1/car/0/')\n      .set('authorization', adminToken)\n      .end((err, res) => {\n        res.body.should.be.a('object');\n        res.body.should.have.property('status').equal(404);\n        res.body.should.have.property('success').equal('false');\n        res.body.should.have.property('error').equal('Ad not found!');\n        done();\n      });\n  });\n/*\n  it('should let ADMIN to DELETE AD successfuly', (done) => {\n    api\n      .get('/api/v1/car/1/')\n      .set('authorization', adminToken)\n      .send(assumedData.admin)\n      .end((err, res) => {\n        res.body.should.be.a('object');\n        res.body.should.have.property('status').equal(200);\n        res.body.should.have.property('success').equal('true');\n        res.body.should.have.property('message').equal('Car Ad successfully deleted!');\n        done();\n      });\n  });\n  */\n});\n"]}